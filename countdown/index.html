<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activity Timer</title>
  <link rel="stylesheet" href="style.css">
  <!-- Firebase SDKs are loaded dynamically in script.js -->
</head>
<body>
  <!-- Main container for timer configuration and countdown -->
  <div id="app">
    <!-- Settings button -->
    <button id="settingsBtn" aria-label="Settings">
      ‚öôÔ∏è
      <span id="syncIndicator" class="hidden"></span>
    </button>

    <!-- Timer setup area -->
    <div id="setupContainer" class="view">
      <!-- Scrollable time selectors -->
      <div id="timeSelectors">
        <div class="timeSelector" id="hoursSelector"></div>
        <div class="timeSelector" id="minutesSelector"></div>
        <div class="timeSelector" id="secondsSelector"></div>
      </div>
      <!-- Preset buttons -->
      <div id="presetContainer">
        <button class="presetBtn" data-minutes="2">00:02:00</button>
        <button class="presetBtn" data-minutes="5">00:05:00</button>
        <button class="presetBtn" data-minutes="10">00:10:00</button>
      </div>
      <!-- Start button -->
      <button id="startBtn" class="actionBtn">Start</button>
    </div>

    <!-- Countdown view -->
    <div id="countdownContainer" class="view hidden">
      <div id="progressRing">
        <svg viewBox="0 0 200 200">
          <circle id="progressBg" cx="100" cy="100" r="90"/>
          <circle id="progressBar" cx="100" cy="100" r="90"/>
        </svg>
        <div id="timeRemaining">0:00</div>
        <div id="endTime"></div>
      </div>
      <div id="activeButtons">
        <button id="pauseResumeBtn" class="actionBtn">Pause</button>
        <button id="deleteBtn" class="dangerBtn hidden">Delete</button>
      </div>
    </div>

    <!-- Finished view -->
    <div id="finishedContainer" class="view hidden">
      <div id="finishedMessage">Time's up!</div>
      <div id="elapsedTime">+0:00</div>
      <div id="finishButtons">
        <button id="restartBtn" class="actionBtn">Restart</button>
        <button id="dismissBtn" class="dangerBtn">Dismiss</button>
      </div>
    </div>

    <!-- Password overlay for pause protection -->
    <div id="pauseOverlay" class="overlay hidden">
      <div class="overlayContent">
        <p>Enter pause password:</p>
        <input type="password" id="pausePasswordInput" autocomplete="off"/>
        <button id="pausePasswordSubmit" class="actionBtn">Submit</button>
      </div>
    </div>

    <!-- Settings panel -->
    <div id="settingsPanel" class="panel hidden">
      <div id="settingsHeader">
        <h2>Settings</h2>
        <button id="closeSettings" aria-label="Close">√ó</button>
      </div>
      <div id="settingsContent">
        <!-- Preset durations -->
        <div class="settingGroup">
          <label>Preset Durations (minutes)</label>
          <div class="presetInputs">
            <input type="number" id="preset1" min="0" max="999"/>
            <input type="number" id="preset2" min="0" max="999"/>
            <input type="number" id="preset3" min="0" max="999"/>
          </div>
        </div>

        <!-- Alarm sound selection -->
        <div class="settingGroup">
          <label for="alarmSelect">Alarm sound</label>
          <select id="alarmSelect">
            <option value="phone">Phone Tone</option>
            <option value="alarm">Traditional Alarm</option>
            <option value="beep">Beep Beep</option>
            <option value="siren">Ambulance</option>
            <option value="bird">Bird</option>
            <option value="knock">Knocking</option>
            <option value="clap">Clapping</option>
            <option value="other">Other</option>
          </select>
        </div>

        <!-- Colour customization -->
        <div class="settingGroup">
          <label>Colours</label>
          <div class="colorInputs">
            <div>
              <label for="colorBg">Background</label>
              <input type="color" id="colorBg"/>
            </div>
            <div>
              <label for="colorAccent">Accent</label>
              <input type="color" id="colorAccent"/>
            </div>
            <div>
              <label for="colorText">Text</label>
              <input type="color" id="colorText"/>
            </div>
          </div>
        </div>

        <!-- Flashing background -->
        <div class="settingGroup">
          <label>Background Flashing</label>
          <select id="flashSelect">
            <option value="none">None</option>
            <option value="flash">Flash</option>
            <option value="pulse">Pulse</option>
          </select>
          <input type="color" id="flashColor" value="#ff4444"/>
        </div>

        <!-- Vibration and notification toggles -->
        <div class="settingGroup">
          <label><input type="checkbox" id="vibrationToggle"/> Vibration</label>
        </div>
        <div class="settingGroup">
          <label><input type="checkbox" id="notificationToggle"/> Notifications</label>
        </div>

        <!-- ID and passwords -->
        <div class="settingGroup">
          <label for="idInput">Sync ID</label>
          <input type="text" id="idInput"/>
        </div>
        <div class="settingGroup">
          <label for="passwordInput">Settings Password (optional)</label>
          <div class="passwordWrapper">
            <input type="password" id="passwordInput"/>
            <button type="button" class="togglePw" data-target="passwordInput">üëÅÔ∏è</button>
          </div>
        </div>
        <div class="settingGroup">
          <label for="pausePassword">Pause Password (optional)</label>
          <div class="passwordWrapper">
            <input type="password" id="pausePassword"/>
            <button type="button" class="togglePw" data-target="pausePassword">üëÅÔ∏è</button>
          </div>
        </div>

        <!-- Reset settings -->
        <div class="settingGroup">
          <button id="resetSettings" class="dangerBtn">Reset to Defaults</button>
        </div>
        <!-- Sync status -->
        <div class="settingGroup" id="syncStatus" class="hidden"></div>
        <!-- About section -->
        <div class="settingGroup about">
          <h3>About</h3>
          <p>This activity timer helps you manage tasks, workouts, study sessions and more. Scroll to set a custom duration or tap one of the presets. Configure alarms, colours, flash effects and more in settings. Synchronise timers across your devices using the sync ID.</p>
          <p>During a countdown you can pause/resume or delete. When time's up, the timer will alert you with your selected sound, optional vibration and notifications. You can then restart or dismiss the session.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database-compat.js"></script>
  <script src="script.js"></script>
</body>
</html>